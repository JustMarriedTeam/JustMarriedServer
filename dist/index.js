"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function setUpEnvironment(){(0,_nodeEnvFile2.default)(__dirname+"/env.properties"),(0,_nodeEnvFile2.default)(""+process.env.configFile,{overwrite:!0,raise:!1}),Promise=require("bluebird")}function connectDatabase(){_mongoose2.default.Promise=Promise,Promise.promisifyAll(_mongoose2.default),_mongoose2.default.connect(process.env.db,{server:{socketOptions:{keepAlive:1}}}),_mongoose2.default.connection.on("error",function(){throw new Error("unable to connect to database: "+process.env.db)}),process.env.MONGOOSE_DEBUG&&_mongoose2.default.set("debug",function(e,o,n,r){debug(e+"."+o,_util2.default.inspect(n,!1,20),r)})}function launchServer(){app=require("./app.js"),module.parent||app.listen(process.env.port,function(){debug("server started on port "+process.env.port+" ("+process.env.env+")")})}Object.defineProperty(exports,"__esModule",{value:!0});var _mongoose=require("mongoose"),_mongoose2=_interopRequireDefault(_mongoose),_util=require("util"),_util2=_interopRequireDefault(_util),_nodeEnvFile=require("node-env-file"),_nodeEnvFile2=_interopRequireDefault(_nodeEnvFile),debug=require("debug")("express-mongoose-es6-rest-api:index"),app;setUpEnvironment(),connectDatabase(),launchServer(),exports.default=app,module.exports=exports.default;