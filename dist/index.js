"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function setUpEnvironment(){_logger2.default.debug("Environment variables: "+JSON.stringify(_properties2.default)),Promise=require("bluebird")}function connectDatabase(){_mongoose2.default.Promise=Promise,Promise.promisifyAll(_mongoose2.default),_mongoose2.default.connect(process.env.dbUrl,{server:{socketOptions:{keepAlive:1}}}),_mongoose2.default.connection.on("error",function(){throw new Error("unable to connect to database: "+process.env.dbUrl)}),process.env.MONGOOSE_DEBUG&&_mongoose2.default.set("err",function(e,r,o,t){err(e+"."+r,_util2.default.inspect(o,!1,20),t)})}function launchServer(){app=require("./app.js"),module.parent||(log("Starting server on "+process.env.port+" port"),app.listen(process.env.port,function(){err("server started on port "+process.env.port+" ("+process.env.env+")")}))}Object.defineProperty(exports,"__esModule",{value:!0});var _mongoose=require("mongoose"),_mongoose2=_interopRequireDefault(_mongoose),_util=require("util"),_util2=_interopRequireDefault(_util),_logger=require("./logger"),_logger2=_interopRequireDefault(_logger),_properties=require("./properties"),_properties2=_interopRequireDefault(_properties),app=void 0;setUpEnvironment(),connectDatabase(),launchServer(),exports.default=app,module.exports=exports.default;